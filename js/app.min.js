var model=[{title:"Kerry Park",lat:47.629552,lng:-122.360127,venueID:"4558a938f964a520493d1fe3",description:"Nunc non fringilla erat, et iaculis lorem. Nam orci odio, ornare sit amet ligula eget, sodales sollicitudin est. Vivamus et augue hendrerit, pellentesque neque ut, finibus lectus. Nulla maximus magna neque, a rhoncus mi laoreet quis. Proin porta efficitur dictum."},{title:"Uncle Ike's",lat:47.613352,lng:-122.302226,venueID:"542b0848498e259fb7853267",description:"Nunc non fringilla erat, et iaculis lorem. Nam orci odio, ornare sit amet ligula eget, sodales sollicitudin est. Vivamus et augue hendrerit, pellentesque neque ut, finibus lectus. Nulla maximus magna neque, a rhoncus mi laoreet quis. Proin porta efficitur dictum."},{title:"Showbox Sodo",lat:47.587926,lng:-122.333627,venueID:"472e59eaf964a520074c1fe3",description:"Nunc non fringilla erat, et iaculis lorem. Nam orci odio, ornare sit amet ligula eget, sodales sollicitudin est. Vivamus et augue hendrerit, pellentesque neque ut, finibus lectus. Nulla maximus magna neque, a rhoncus mi laoreet quis. Proin porta efficitur dictum."},{title:"Toulouse Petit",lat:47.624761,lng:-122.357008,venueID:"4ae60430f964a52018a421e3",description:"Nunc non fringilla erat, et iaculis lorem. Nam orci odio, ornare sit amet ligula eget, sodales sollicitudin est. Vivamus et augue hendrerit, pellentesque neque ut, finibus lectus. Nulla maximus magna neque, a rhoncus mi laoreet quis. Proin porta efficitur dictum."},{title:"GameWorks",lat:47.611909,lng:-122.334027,venueID:"40b7d280f964a5208d001fe3",description:"Nunc non fringilla erat, et iaculis lorem. Nam orci odio, ornare sit amet ligula eget, sodales sollicitudin est. Vivamus et augue hendrerit, pellentesque neque ut, finibus lectus. Nulla maximus magna neque, a rhoncus mi laoreet quis. Proin porta efficitur dictum."}],infoWindow,viewModel=function(){var a=this;a.googleMap=new google.maps.Map(document.getElementById("map"),{zoom:13,center:{lat:47.6062,lng:-122.332}}),a.allMarkers=[];var b=function(a){this.title=a.title,this.lat=a.lat,this.lng=a.lng,this.venueID=a.venueID,this.description=a.description,this.marker=null};model.forEach(function(c){a.allMarkers.push(new b(c))});var c="https://api.foursquare.com/v2/venues/",d="?client_id=NVT0H2AVTCVAS3AZM5M5ITUQ4Q1D05GA2LL0BW33OEVEPAFE&client_secret=BTEL02NGF4LMABLSNMYAKKLC43N0ZH0QUDZYB4H54Q3VSEDD&v=20130815";a.allMarkers.forEach(function(b){var e={map:a.googleMap,animation:google.maps.Animation.DROP,title:b.title,position:{lat:b.lat,lng:b.lng}};b.marker=new google.maps.Marker(e),infoWindow=new google.maps.InfoWindow({content:null}),b.marker.addListener("click",function(e){return function(){infoWindow.open(a.googleMap,e),$.getJSON(c+b.venueID+d,function(a){var c=a.response.venue;infoWindow.setContent(""),infoWindow.setContent("<h3>"+c.name+"</h3><h5>"+c.categories[0].name+"</h5><div>"+b.description+'</div><div><h6 id="address">Address:</h6><span>'+c.location.address+'</span></div><div id="center"><img src="'+c.photos.groups[0].items[0].prefix+"width200"+c.photos.groups[0].items[0].suffix+'""><img src="'+c.photos.groups[0].items[1].prefix+"width200"+c.photos.groups[0].items[1].suffix+'""><img src="'+c.photos.groups[0].items[2].prefix+"width200"+c.photos.groups[0].items[3].suffix+'""></div><p>Photos courtesy of FourSquare</p>')}).error(function(){infoWindow.setContent("<div>Network Error.</div>")}),e.setAnimation(google.maps.Animation.BOUNCE),window.setTimeout(function(){e.setAnimation(null)},1450)}}(b.marker))}),a.visibleMarkers=ko.observableArray(),a.allMarkers.forEach(function(b){a.visibleMarkers.push(b)}),a.query=ko.observable(""),a.search=function(){var b=a.query().toLowerCase();a.visibleMarkers.removeAll(),a.allMarkers.forEach(function(c){c.marker.setMap(null),-1!==c.title.toLowerCase().indexOf(b)&&a.visibleMarkers.push(c)}),a.visibleMarkers().forEach(function(b){b.marker.setMap(a.googleMap)})},a.listClick=function(a){google.maps.event.trigger(a.marker,"click")}};ko.applyBindings(new viewModel);